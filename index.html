<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ¦é™³å…ˆç”Ÿçš„æƒ…äººç¯€é©šå–œ</title>
    <style>
        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: transparent; overflow: hidden;
        }

        .full-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background: url('IMG_8227.gif') no-repeat center center;
            background-size: cover;
        }

        .screen {
            display: none; width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            flex-direction: column; align-items: center; justify-content: center;
            text-align: center;
        }
        .active { display: flex; animation: fadeIn 0.5s ease; }

        .content-box {
            background: rgba(255, 255, 255, 0.65);
            padding: 25px; border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 85%; width: 300px;
            backdrop-filter: blur(8px);
            z-index: 10;
        }

        h1 { color: #ff4d6d; font-size: 1.5rem; margin-bottom: 10px; font-weight: bold; }
        .reward-title { color: #ff4d6d; font-size: 1.3rem; font-weight: bold; margin-bottom: 15px; display: block; }
        p { color: #333; font-size: 1.05rem; font-weight: bold; line-height: 1.6; }

        input[type="password"] {
            padding: 12px; border-radius: 10px; border: 2px solid #ffb6c1;
            width: 80%; text-align: center; font-size: 1.1rem; margin-bottom: 15px;
        }

        .btn-main {
            background: #ff4d6d; color: white; border: none;
            padding: 10px 25px; border-radius: 50px; font-size: 1rem;
            cursor: pointer; font-weight: bold; margin-top: 10px;
        }

        .card-wrap { display: flex; gap: 15px; justify-content: center; margin-top: 15px; }
        .card {
            width: 120px; height: 175px; border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem; font-weight: bold; cursor: pointer;
            transition: 0.3s; border: 2px solid rgba(255,255,255,0.8);
        }
        .card-pink { background: rgba(255, 182, 193, 0.7); color: #d63384; }
        .card-blue { background: rgba(173, 216, 230, 0.7); color: #0077b6; }

        .heart {
            position: absolute; color: #ff4d6d; font-family: Arial;
            animation: float 4s linear forwards; pointer-events: none;
            z-index: 9999; 
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes float { 
            0% { transform: translateY(105vh) scale(0.5); opacity: 1; } 
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; } 
        }
    </style>
</head>
<body>

    <div class="full-bg"></div>

    <audio id="bgMusic" preload="auto">
        <source src="Ed Sheeran-One Life.mp3" type="audio/mpeg">
    </audio>

    <div id="screen1" class="screen active">
        <div class="content-box">
            <h1>Valentine's Secret</h1>
            <p>è«‹è¼¸å…¥çµå©šç´€å¿µæ—¥è§£é–</p>
            <input type="password" id="pw" placeholder="YYYYMMDD">
            <br>
            <button class="btn-main" onclick="startAdventure()">Unlock Surprise</button>
        </div>
    </div>

    <div id="screen2" class="screen">
        <div class="content-box">
            <h1>æŠ‰æ“‡æ™‚åˆ»</h1>
            <p>è¦ªæ„›çš„è€å…¬ï¼Œè«‹æŠ½ç‰Œï¼š</p>
            <div class="card-wrap">
                <div class="card card-pink" onclick="confirmChoice('æ©Ÿæœƒ')">æ©Ÿæœƒ</div>
                <div class="card card-blue" onclick="confirmChoice('å‘½é‹')">å‘½é‹</div>
            </div>
        </div>
    </div>

    <div id="screen3" class="screen">
        <div class="content-box">
            <h1 id="confirmTitle">æŠ‰æ“‡æ™‚åˆ»</h1>
            <p>Are you sure?</p>
            <p>( ç¢ºå®šé¸æ“‡é€™å¼µå¡ç‰Œå—ï¼Ÿ )</p>
            <button class="btn-main" onclick="showScreen(4)">ç¢ºå®š</button>
            <button class="btn-main" style="background:#aaa; margin-top:5px;" onclick="showScreen(2)">è¿”å›</button>
        </div>
    </div>

    <div id="screen4" class="screen">
        <div class="content-box">
            <h1>ç¿»é–‹çå‹µ</h1>
            <div class="card-wrap">
                <div class="card card-pink" onclick="finalSurprise('A')">å¡ç‰Œ A</div>
                <div class="card card-blue" onclick="finalSurprise('B')">å¡ç‰Œ B</div>
            </div>
        </div>
    </div>

    <div id="screen5" class="screen">
        <div class="content-box" style="width: 320px; max-width: 90%;">
            <h1>æ­å–œç²çï¼</h1>
            <span id="rewardName" class="reward-title"></span>
            <p id="finalMsg" style="color:#333; font-size:1rem; margin:10px 0; text-align: left; border: 1px dashed #ffb6c1; padding: 15px; border-radius: 15px; background: rgba(255,255,255,0.4);"></p>
            
            <button class="btn-main" onclick="resetToPlay()">é‡æ–°æŒ‘æˆ°</button>
            <br>
            <button class="btn-main" style="background:#ffb6c1;" onclick="burstHearts()">ç™¼é€æ»¿å¤©æ„›å¿ƒ â¤ï¸</button>
        </div>
    </div>

    <script>
        let currentChoice = '';
        let heartTimers = []; // ç”¨ä¾†è¿½è¹¤æ‰€æœ‰çš„æ„›å¿ƒå®šæ™‚å™¨
        const data = {
            'æ©Ÿæœƒ': { 
                A: { name: 'ã€Šæ·±å¤œé£Ÿå ‚ï¼é›™äººé™å®šç‰ˆã€‹', msg: 'è¦ªæ„›çš„é™³å…ˆç”Ÿï¼Œæ­å–œç²å¾—è·Ÿè€å©†åƒé£¯çš„æ©Ÿæœƒï¼Œæœ€è¿‘çš„åƒé£¯éƒ½è·Ÿæ‰“ä»—ä¸€æ¨£ï¼Œå¸Œæœ›èƒ½æœ‰é€™å€‹æ©ŸæœƒæŠŠå¼Ÿå¼Ÿæ‰˜çµ¦ä½ çˆ¸åª½è®“æˆ‘å€‘æœ‰æ™‚é–“å¯ä»¥å¥½å¥½åƒä¸€é “é£¯å–”ğŸ˜œ' },
                B: { name: 'ã€Šè¦æ‚¶å£å•¦ï¼æˆ¶å¤–æ”¾é›»æ—¥ã€‹', msg: 'è¦ªæ„›çš„è‡­çˆ¸çˆ¸æˆ‘å€‘æƒ³å‡ºå»ç©å•¦ï½ï½è«‹æ‰¾ä¸€å¤©å¸¶æˆ‘å€‘å»å‹•ç‰©åœ’å§æ‹œè¨—ä½ ğŸ¥¹é€™å€‹æ²’é™å®šæ˜¯å°ç£çš„é‚„æ˜¯åœ‹å¤–çš„å–”ï¼ŒYou know what I meanğŸ˜œ' }
            },
            'å‘½é‹': { 
                A: { name: 'ã€Šå…é¡§å°å­©åˆ¸ï¼One Dayã€‹', msg: 'è¦ªæ„›çš„é™³å…ˆç”Ÿä½ è¾›è‹¦äº†ï¼Œåœ¨é€™æ®µè‚²å…’ç”Ÿæ´»ä¸­æ¯æ¬¡éƒ½å› ç‚ºæˆ‘è¦å‡ºå·®æˆ–è€…å›å°åŒ—è®“ä½ è‡ªå·±ç…§é¡§å¼Ÿå¼Ÿï¼ŒæŠ½åˆ°é€™å¼µåˆ¸ä½ å°±ä¸ç”¨æ“”å¿ƒï¼Œéš¨æ™‚æƒ³äº«å—me timeçš„æ™‚å€™å°±ç”¨å§ï¼ğŸ¤©' },
                B: { name: 'ã€Šå®¶å‹™è±å…åˆ¸ï¼One Weekã€‹', msg: 'åšä»€éº¼å®¶äº‹ï¼æ±è¥¿æ”¾è‘—ã€å°¿å¸ƒæ”¾è‘—ã€å¥¶ç“¶ä¹Ÿæ”¾è‘—ï¼Œé€šé€šæˆ‘ä¾†ğŸ˜¤é€™é€±çš„æˆ‘æœ€ç½©ï¼Œä½ å°±æ”¾å¿ƒçš„å»ç©é›»è…¦ï¼Œç¿¹è…³å¹«è¿ªç‹—æŠ“æŠ“å§ï¼' }
            }
        };

        const audio = document.getElementById('bgMusic');

        function startAdventure() {
            if (document.getElementById('pw').value === '20230919') {
                audio.currentTime = 13;
                audio.play().catch(e => console.log("Audio play deferred"));
                showScreen(2);
            } else { alert('å¯†ç¢¼éŒ¯èª¤ï¼'); }
        }

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen' + id).classList.add('active');
        }

        // ä¿®æ”¹ï¼šæŒ‰ä¸‹é‡æ–°æŒ‘æˆ°æ™‚ï¼Œå³åˆ»æ¸…é™¤ç•«é¢æ„›å¿ƒä¸¦å–æ¶ˆæ‰€æœ‰å¾ŒçºŒç”Ÿæˆ
        function resetToPlay() {
            // 1. å–æ¶ˆæ‰€æœ‰æ’éšŠä¸­çš„æ„›å¿ƒç”ŸæˆæŒ‡ä»¤
            heartTimers.forEach(timer => clearTimeout(timer));
            heartTimers = []; 

            // 2. æ¸…é™¤ç•«é¢ä¸Šå·²ç¶“è·‘å‡ºä¾†çš„æ„›å¿ƒ
            document.querySelectorAll('.heart').forEach(h => h.remove());

            showScreen(2);
        }

        function confirmChoice(choice) {
            currentChoice = choice;
            document.getElementById('confirmTitle').innerText = `ã€${choice}ã€‘çš„æŠ‰æ“‡`;
            showScreen(3);
        }

        function finalSurprise(letter) {
            const result = data[currentChoice][letter];
            document.getElementById('rewardName').innerText = result.name;
            document.getElementById('finalMsg').innerText = result.msg;
            showScreen(5);
        }

        function burstHearts() {
            // å…ˆæ¸…ç©ºä¸€æ¬¡ï¼Œé˜²æ­¢é€£é»å°è‡´æ„›å¿ƒæ•¸é‡éå¤š
            heartTimers.forEach(timer => clearTimeout(timer));
            heartTimers = [];

            for(let i=0; i<60; i++) {
                let t = setTimeout(createHeart, i * 80);
                heartTimers.push(t); // æŠŠæ¯å€‹æ’éšŠæŒ‡ä»¤è¨˜ä¸‹ä¾†
            }
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = 'â¤ï¸';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 25 + 20) + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 4000);
        }
    </script>
</body>
</html>
